<ion-header>
  <ion-navbar>
    <ion-title>
      全部订单
    </ion-title>
  </ion-navbar>
  <!-- 搜索栏 -->
<ion-toolbar>
    <ion-searchbar [(ngModel)]="searchInput"
    (ionInput)="getItems($event)" placeholder="请输入日期" 
    autocomplete="on" mode='ios' showCancelButton='true' 
    cancelButtonText="取消" (ionCancel)="onCancelSearch($event)" >
    </ion-searchbar>
    <ion-item>
    <ion-label>有效订单</ion-label>
         <ion-checkbox [(ngModel)]="valid" mode='ios'
        (ionChange)="updateValid($event)" value="true"
        ></ion-checkbox>
      </ion-item>
</ion-toolbar>
<!-- 导航 -->
  <ion-toolbar no-border-top>
    <ion-segment [(ngModel)]="order">
      <ion-segment-button value="rooms">
        房间订单
      </ion-segment-button>
      <ion-segment-button value="cars">
        用车订单
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content ng-controller="myCtrl">
  <div [ngSwitch]="order">

<!-- 房间订单页面 -->
    <div *ngSwitchCase="'rooms'" >
<!-- 搜索后显示 -->
<div *ngIf="isSearching">
<ion-card *ngFor="let i of searchingItems" >
      <ion-card-content>
        <ion-card-title>
          预定信息
          </ion-card-title>
            <p><span>开始时间：</span>{{i.start_time}}</p>
            <p><span>预定天数：</span>{{i.days+ "天"}}</p>
            <p ><span>房间数：</span>{{i.rooms+ "间"}}</p>
            <p ><span>房型：</span>{{i.layout}}</p>
            <p ><span>状态：</span>{{i.status}}</p>
        <ion-item>
            <button ion-button icon-start clear item-end block 
            (click)="cancelOrder(i)" [disabled]="!i.status">
              取消预订
            </button>
            </ion-item>
      </ion-card-content>
    </ion-card>
  </div>
<!-- 不搜索显示 -->
<div *ngIf="!isSearching">
  <ion-card *ngFor="let i of pages" >
      <ion-card-content>
        <ion-card-title>
          预定信息
          </ion-card-title>
            <p><span>开始时间：</span>{{i.start_time}}</p>
            <p><span>预定天数：</span>{{i.days+ "天"}}</p>
            <p><span>房间数：</span>{{i.rooms+ "间"}}</p>
            <p ><span>房型：</span>{{i.layout}}</p>
            <p ><span>状态：</span>{{i.status}}</p>
        <ion-item>
            <button ion-button icon-start clear item-end block 
            (click)="cancelOrder(i)" [disabled]="!i.status" outline >
              取消预订
            </button>
            </ion-item>
      </ion-card-content>
    </ion-card>
  </div>
     </div>
     <div *ngIf="noSearching"><h2 style=text-align:center>没有更多订单了</h2></div>

<!-- 用车订单页面 -->
     <div *ngSwitchCase="'cars'">

    </div>
</div>
  <ion-infinite-scroll (ionInfinite)="doInfinite($event)" 
  *ngIf="page < totalPage">
    <ion-infinite-scroll-content loadingSpinner="bubbles" 
    loadingText="Loading more data..."></ion-infinite-scroll-content>
  </ion-infinite-scroll> 

</ion-content>